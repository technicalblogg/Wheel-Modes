<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wheel & Tyre Natural Frequency Modes: Tyre vs. Rim/Brake Dominance</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="style.css"
</head>
<body class="p-6 md:p-10 lg:p-12">
    <div class="max-w-6xl mx-auto">
        <h1 class="text-4xl md:text-5xl font-extrabold text-center text-gray-800 mb-10">
            Wheel Natural Frequency Modes
        </h1>
        <p class="text-lg text-center text-gray-600 mb-12">
            Understanding how different components of the wheel assembly influence vehicle dynamics.
        </p>

        <div class="flex justify-center mb-8">
            <button class="tab-button" data-tab="tyre-modes-data">Tyre-Dominant Modes</button>
            <button class="tab-button" data-tab="rim-brake-modes-data">Rim/Brake-Dominant Modes</button>
            <button class="tab-button" data-tab="comparison">Comparison</button>
        </div>

        <div id="tyre-modes-data" class="tab-content">
            <h2 class="section-heading">Tyre-Dominant Modes</h2>
            <p class="text-center text-gray-600 mb-8 max-w-3xl mx-auto">
                These lower-order modes are primarily influenced by the tyre's flexibility and are critical for a vehicle's fundamental ride comfort and handling stability.
            </p>

            <div class="card grid grid-cols-1 md:grid-cols-3 gap-6 items-center">
                <div class="component-tag tag-tyre">Tyre-Dominant</div>
                <div class="md:col-span-1">
                    <div class="mode-title">Mode 1: Radial (Vertical) Stiffness</div>
                    <p class="text-gray-700 mb-4">Tyre compresses and expands radially (vertically) against the road. Influenced by tyre pressure.</p>
                </div>
                <div class="md:col-span-2">
                    <div class="mb-4">
                        <div class="impact-label">Steering Impact: Minor</div>
                        <div class="impact-bar"><div class="impact-fill minor"></div></div>
                        <p class="text-sm text-gray-600 mt-1">Minor direct impact; indirect effect on driver confidence if severe vertical vibration.</p>
                    </div>
                    <div class="mb-4">
                        <div class="impact-label">Ride Impact: Major</div>
                        <div class="impact-bar"><div class="impact-fill major"></div></div>
                        <p class="text-sm text-gray-600 mt-1">Directly related to vehicle's sprung/unsprung mass resonance and wheel hop. Critical for comfort, minimizes harshness, ensures consistent tyre contact. Poor damping leads to "pogo-stick" bounce.</p>
                    </div>
                    <div>
                        <div class="impact-label">Handling Impact: Significant</div>
                        <div class="impact-bar"><div class="impact-fill significant"></div></div>
                        <p class="text-sm text-gray-600 mt-1">Affects tyre contact patch variation. Can lead to momentary grip loss, reduced braking effectiveness, and compromised directional stability, especially on rough surfaces.</p>
                    </div>
                </div>
            </div>

            <div class="card grid grid-cols-1 md:grid-cols-3 gap-6 items-center">
                <div class="component-tag tag-tyre">Tyre-Dominant</div>
                <div class="md:col-span-1">
                    <div class="mode-title">Mode 2: Lateral (Side-to-Side) Stiffness</div>
                    <p class="text-gray-700 mb-4">Tyre deforms laterally (side-to-side) relative to the rim. Influenced by tyre sidewall stiffness.</p>
                </div>
                <div class="md:col-span-2">
                    <div class="mb-4">
                        <div class="impact-label">Steering Impact: Moderate</div>
                        <div class="impact-bar"><div class="impact-fill moderate"></div></div>
                        <p class="text-sm text-gray-600 mt-1">Contributes to "lateral compliance steer," affecting steering precision and linearity. Can make the steering feel vague or imprecise.</p>
                    </div>
                    <div class="mb-4">
                        <div class="impact-label">Ride Impact: Minor</div>
                        <div class="impact-bar"><div class="impact-fill minor"></div></div>
                        <p class="text-sm text-gray-600 mt-1">Minor direct impact on vertical comfort; can contribute to lateral body motions or "wobble" on uneven roads.</p>
                    </div>
                    <div>
                        <div class="impact-label">Handling Impact: Significant</div>
                        <div class="impact-bar"><div class="impact-fill significant"></div></div>
                        <p class="text-sm text-gray-600 mt-1">Directly affects the vehicle's lateral stability during cornering and lane changes. Undesirable lateral oscillations reduce cornering grip and make the vehicle feel less predictable.</p>
                    </div>
                </div>
            </div>


            <div class="card grid grid-cols-1 md:grid-cols-3 gap-6 items-center">
                <div class="component-tag tag-tyre">Tyre-Dominant</div>
                <div class="md:col-span-1">
                    <div class="mode-title">Mode 3: Torsional (Twisting) Stiffness</div>
                    <p class="text-gray-700 mb-4">Tyre twists around its own axis, primarily due to braking or acceleration forces.</p>
                </div>
                <div class="md:col-span-2">
                    <div class="mb-4">
                        <div class="impact-label">Steering Impact: Minor</div>
                        <div class="impact-bar"><div class="impact-fill minor"></div></div>
                        <p class="text-sm text-gray-600 mt-1">Minor direct impact.</p>
                    </div>
                    <div class="mb-4">
                        <div class="impact-label">Ride Impact: Minor</div>
                        <div class="impact-bar"><div class="impact-fill minor"></div></div>
                        <p class="text-sm text-gray-600 mt-1">Minor direct impact on comfort.</p>
                    </div>
                    <div>
                        <div class="impact-label">Handling Impact: Moderate</div>
                        <div class="impact-bar"><div class="impact-fill moderate"></div></div>
                        <p class="text-sm text-gray-600 mt-1">Can affect traction and braking performance, particularly during hard acceleration or braking, by allowing the tyre to "wind up" before transmitting torque effectively. Can lead to wheel spin or lock-up if not managed.</p>
                    </div>
                </div>
            </div>
        </div>

        <div id="rim-brake-modes-data" class="tab-content">
            <h2 class="section-heading">Rim & Brake Component-Dominant Modes</h2>
            <p class="text-center text-gray-600 mb-8 max-w-3xl mx-auto">
                These higher-order modes are increasingly influenced by the structural dynamics of the rim, brake components, and hub, significantly impacting NVH and specific aspects of steering and braking.
            </p>

            <div class="card grid grid-cols-1 md:grid-cols-3 gap-6 items-center">
                <div class="component-tag tag-rim-brake">Rim & Brake-Dominant</div>
                <div class="md:col-span-1">
                    <div class="mode-title">Modes 4-7: Higher-Order Bending/Shell</div>
                    <p class="text-gray-700 mb-4">Complex bending and shell-like deformations of the rim and tyre structure.</p>
                </div>
                <div class="md:col-span-2">
                    <div class="mb-4">
                        <div class="impact-label">Steering Impact: Moderate</div>
                        <div class="impact-bar"><div class="impact-fill moderate"></div></div>
                        <p class="text-sm text-gray-600 mt-1">Can introduce high-frequency vibrations ("buzz," "hum") into the steering column (shimmy or wobble), affecting steering feel and driver confidence.</p>
                    </div>
                    <div class="mb-4">
                        <div class="impact-label">Ride Impact: Moderate to Significant</div>
                        <div class="impact-bar"><div class="impact-fill significant"></div></div>
                        <p class="text-sm text-gray-600 mt-1">Vibrations at these frequencies are efficiently transmitted to the cabin, leading to perceived harshness, buzzing noises, or general lack of refinement, especially at higher speeds or on coarse road surfaces.</p>
                    </div>
                    <div>
                        <div class="impact-label">Handling / NVH Impact: NVH Dominant</div>
                        <div class="impact-bar"><div class="impact-fill moderate"></div></div>
                        <p class="text-sm text-gray-600 mt-1">Less direct impact on overall stability or grip compared to lower modes. Main effect is on NVH (Noise, Vibration, Harshness). Can contribute to tyre noise generation.</p>
                    </div>
                </div>
            </div>

            <div class="card grid grid-cols-1 md:grid-cols-3 gap-6 items-center">
                <div class="component-tag tag-rim-brake">Rim & Brake-Dominant</div>
                <div class="md:col-span-1">
                    <div class="mode-title">Modes 8-10: Very High-Order / Coupled</div>
                    <p class="text-gray-700 mb-4">Intricate deformation patterns involving the rim, tyre, and increasingly the brake rotor and caliper.</p>
                </div>
                <div class="md:col-span-2">
                    <div class="mb-4">
                        <div class="impact-label">Steering Impact: Minor (NVH)</div>
                        <div class="impact-bar"><div class="impact-fill minor"></div></div>
                        <p class="text-sm text-gray-600 mt-1">Can contribute to very high-frequency vibrations or "buzz" in the steering system, sometimes associated with brake judder if brake components are involved.</p>
                    </div>
                    <div class="mb-4">
                        <div class="impact-label">Ride Impact: Significant (NVH)</div>
                        <div class="impact-bar"><div class="impact-fill significant"></div></div>
                        <p class="text-sm text-gray-600 mt-1">Primary source of high-frequency road noise and harshness transmitted into the cabin, especially at highway speeds. Heavily influences the overall perceived quality and refinement of the vehicle.</p>
                    </div>
                    <div>
                        <div class="impact-label">Handling / NVH Impact: NVH Dominant</div>
                        <div class="impact-bar"><div class="impact-fill minor"></div></div>
                        <p class="text-sm text-gray-600 mt-1">Very minor direct impact on macroscopic handling (grip/stability). Their main effect is on the perceived ride quality and acoustic comfort (NVH). Can contribute to brake squeal or judder.</p>
                    </div>
                </div>
            </div>

            <div class="card grid grid-cols-1 md:grid-cols-3 gap-6 items-center">
                <div class="component-tag tag-rim-brake">Brake-Dominant</div>
                <div class="md:col-span-1">
                    <div class="mode-title">Brake Rotor Modes (Specific)</div>
                    <p class="text-gray-700 mb-4">Specific bending, warping, or 'umbrella' modes of the brake rotor, often excited during braking.</p>
                </div>
                <div class="md:col-span-2">
                    <div class="mb-4">
                        <div class="impact-label">Steering Impact: Direct (Brake Judder)</div>
                        <div class="impact-bar"><div class="impact-fill significant"></div></div>
                        <p class="text-sm text-gray-600 mt-1">Directly linked to pulsating vibrations felt through the steering wheel and brake pedal (brake judder).</p>
                    </div>
                    <div class="mb-4">
                        <div class="impact-label">Ride Impact: NVH during Braking</div>
                        <div class="impact-bar"><div class="impact-fill moderate"></div></div>
                        <p class="text-sm text-gray-600 mt-1">Can cause audible noise (squeal, groan) and vibrations transmitted to the cabin specifically during braking.</p>
                    </div>
                    <div>
                        <div class="impact-label">Handling Impact: Braking Effectiveness</div>
                        <div class="impact-bar"><div class="impact-fill significant"></div></div>
                        <p class="text-sm text-gray-600 mt-1">Affects braking effectiveness and modulation by causing uneven pad contact, leading to reduced driver confidence and potential loss of braking performance under severe judder.</p>
                    </div>
                </div>
            </div>

            <div class="card grid grid-cols-1 md:grid-cols-3 gap-6 items-center">
                <div class="component-tag tag-rim-brake">Brake-Dominant</div>
                <div class="md:col-span-1">
                    <div class="mode-title">Brake Caliper/Pad Modes (Specific)</div>
                    <p class="text-gray-700 mb-4">Natural frequencies of the brake caliper and pads themselves.</p>
                </div>
                <div class="md:col-span-2">
                    <div class="mb-4">
                        <div class="impact-label">Steering Impact: No Direct Impact</div>
                        <div class="impact-bar"><div class="impact-fill very-minor"></div></div>
                        <p class="text-sm text-gray-600 mt-1">No direct steering impact.</p>
                    </div>
                    <div class="mb-4">
                        <div class="impact-label">Ride Impact: No Direct Impact</div>
                        <div class="impact-bar"><div class="impact-fill very-minor"></div></div>
                        <p class="text-sm text-gray-600 mt-1">No direct ride comfort impact.</p>
                    </div>
                    <div>
                        <div class="impact-label">Handling / NVH Impact: NVH (Squeal/Groan)</div>
                        <div class="impact-bar"><div class="impact-fill moderate"></div></div>
                        <p class="text-sm text-gray-600 mt-1">Primarily contributes to brake squeal and groan (audible noise) during braking, a pure NVH concern.</p>
                    </div>
                </div>
            </div>

            <div class="card grid grid-cols-1 md:grid-cols-3 gap-6 items-center">
                <div class="component-tag tag-rim-brake">Hub/Bearing-Dominant</div>
                <div class="md:col-span-1">
                    <div class="mode-title">Wheel Hub/Bearing Modes (Specific)</div>
                    <p class="text-gray-700 mb-4">Vibrations stemming from the hub's stiffness, mass, or issues with bearings.</p>
                </div>
                <div class="md:col-span-2">
                    <div class="mb-4">
                        <div class="impact-label">Steering Impact: Indirect (Vibrations/Noise)</div>
                        <div class="impact-bar"><div class="impact-fill moderate"></div></div>
                        <p class="text-sm text-gray-600 mt-1">Can introduce vibrations and noise (e.g., humming or grinding sounds) felt through the steering wheel and floor.</p>
                    </div>
                    <div class="mb-4">
                        <div class="impact-label">Ride Impact: Harshness/Noise</div>
                        <div class="impact-bar"><div class="impact-fill moderate"></div></div>
                        <p class="text-sm text-gray-600 mt-1">Can cause perceived harshness and cabin noise, especially if bearings are worn.</p>
                    </div>
                    <div>
                        <div class="impact-label">Handling Impact: System Integrity</div>
                        <div class="impact-bar"><div class="impact-fill minor"></div></div>
                        <p class="text-sm text-gray-600 mt-1">Generally no direct impact on handling parameters like grip, but worn components can affect alignment and overall system integrity.</p>
                    </div>
                </div>
            </div>

            <div class="card grid grid-cols-1 md:grid-cols-3 gap-6 items-center">
                <div class="component-tag tag-rim-brake">Rim & Brake-Dominant</div>
                <div class="md:col-span-1">
                    <div class="mode-title">Spoke Resonance</div>
                    <p class="text-gray-700 mb-4">Vibrations specifically related to the natural frequencies of the wheel spokes, often excited by road inputs or wheel imbalance.</p>
                </div>
                <div class="md:col-span-2">
                    <div class="mb-4">
                        <div class="impact-label">Steering Impact: Low</div>
                        <div class="impact-bar"><div class="impact-fill low"></div></div>
                        <p class="text-sm text-gray-600 mt-1">Minor contribution to steering wheel vibrations, typically felt as a high-frequency buzz.</p>
                    </div>
                    <div class="mb-4">
                        <div class="impact-label">Ride Impact: Medium</div>
                        <div class="impact-bar"><div class="impact-fill medium"></div></div>
                        <p class="text-sm text-gray-600 mt-1">Can transmit noticeable vibrations and harshness into the cabin, affecting overall ride comfort.</p>
                    </div>
                    <div>
                        <div class="impact-label">Handling / NVH Impact: High (NVH)</div>
                        <div class="impact-bar"><div class="impact-fill high"></div></div>
                        <p class="text-sm text-gray-600 mt-1">Primarily an NVH concern, contributing to wheel noise and overall cabin noise, especially at specific speeds where resonance occurs.</p>
                    </div>
                </div>
            </div>
        </div>

        <div id="comparison" class="tab-content">
            <h2 class="section-heading">Frequency Mode Comparison</h2>
            <p class="text-lg text-center text-gray-600 mb-8">
                Understanding the relationship between different wheel modes and their impact on vehicle performance.
            </p>

            <div class="bg-white rounded-xl shadow-lg p-6 mb-8">
                <h3 class="text-xl font-semibold text-gray-800 mb-4 text-center">Frequency Range Overview</h3>
                <div class="horizontal-chart-container relative">
                    <div class="vertical-grid-line" style="left: calc(0% + 120px);"></div>
                    <div class="vertical-grid-line" style="left: calc(12.5% + 120px);"></div>
                    <div class="vertical-grid-line" style="left: calc(25% + 120px);"></div>
                    <div class="vertical-grid-line" style="left: calc(37.5% + 120px);"></div>
                    <div class="vertical-grid-line" style="left: calc(50% + 120px);"></div>
                    <div class="vertical-grid-line" style="left: calc(62.5% + 120px);"></div>
                    <div class="vertical-grid-line" style="left: calc(75% + 120px);"></div>
                    <div class="vertical-grid-line" style="left: calc(87.5% + 120px);"></div>
                    <div class="vertical-grid-line" style="left: calc(100% + 120px);"></div>

                    <div class="chart-row">
                        <div class="y-axis-label">Radial Stiffness</div>
                        <div class="horizontal-bar-track">
                            <div class="horizontal-bar tyre-dominant" data-start-freq="8" data-end-freq="15">
                                <span class="freq-range-overlay"></span>
                            </div>
                        </div>
                    </div>
                    <div class="chart-row">
                        <div class="y-axis-label">Lateral Stiffness</div>
                        <div class="horizontal-bar-track">
                            <div class="horizontal-bar tyre-dominant" data-start-freq="10" data-end-freq="20">
                                <span class="freq-range-overlay"></span>
                            </div>
                        </div>
                    </div>
                    <div class="chart-row">
                        <div class="y-axis-label">Torsional Stiffness</div>
                        <div class="horizontal-bar-track">
                            <div class="horizontal-bar tyre-dominant" data-start-freq="15" data-end-freq="30">
                                <span class="freq-range-overlay"></span>
                            </div>
                        </div>
                    </div>
                    <div class="chart-row">
                        <div class="y-axis-label">Rim Flexural</div>
                        <div class="horizontal-bar-track">
                            <div class="horizontal-bar rim-brake-dominant" data-start-freq="30" data-end-freq="100">
                                <span class="freq-range-overlay"></span>
                            </div>
                        </div>
                    </div>
                    <div class="chart-row">
                        <div class="y-axis-label">Brake Disk</div>
                        <div class="horizontal-bar-track">
                            <div class="horizontal-bar rim-brake-dominant" data-start-freq="50" data-end-freq="300">
                                <span class="freq-range-overlay"></span>
                            </div>
                        </div>
                    </div>
                    <div class="chart-row">
                        <div class="y-axis-label">Spoke Resonance</div>
                        <div class="horizontal-bar-track">
                            <div class="horizontal-bar rim-brake-dominant" data-start-freq="80" data-end-freq="700">
                                <span class="freq-range-overlay"></span>
                            </div>
                        </div>
                    </div>

                    <div class="x-axis-labels">
                        <span>0 Hz</span>
                        <span>100 Hz</span>
                        <span>200 Hz</span>
                        <span>300 Hz</span>
                        <span>400 Hz</span>
                        <span>500 Hz</span>
                        <span>600 Hz</span>
                        <span>700 Hz</span>
                        <span>800 Hz</span>
                    </div>
                </div>
            </div>

            <div class="bg-white rounded-xl shadow-lg p-6 mb-8 comparison-table-summary">
                <h3 class="text-xl font-semibold text-gray-800 mb-4 text-center">Tyre vs. Rim/Brake-Dominant Modes Summary</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Category</th>
                            <th>Key Characteristics</th>
                            <th>Frequency Range</th>
                            <th>Primary Performance Impact</th>
                            <th>Tuning Factors</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Tyre-Dominant Modes</td>
                            <td>Lower-order modes, primarily influenced by tyre flexibility. More noticeable to vehicle occupants.</td>
                            <td>10-30 Hz</td>
                            <td>Directly impacts Ride Quality and Handling (e.g., bounce, grip).</td>
                            <td>Tyre pressure, tyre construction (sidewall stiffness, tread pattern).</td>
                        </tr>
                        <tr>
                            <td>Rim/Brake-Dominant Modes</td>
                            <td>Higher-order modes, influenced by rim, brake components, and hub structure.</td>
                            <td>80-700 Hz</td>
                            <td>Primarily affects NVH characteristics (Noise, Vibration, Harshness). Often manifests as audible noise or high-frequency vibration.</td>
                            <td>Wheel material, rim design, brake component design, mounting stiffness.</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="bg-white rounded-xl shadow-lg p-6 performance-matrix">
                <h3 class="text-xl font-semibold text-gray-800 mb-4 text-center">Mode Performance Impact Summary</h3>
                <table>
                    <thead>
                        <tr>
                            <th>MODE</th>
                            <th>RIDE COMFORT</th>
                            <th>HANDLING</th>
                            <th>NVH</th>
                            <th>BRAKING</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Radial Stiffness</td>
                            <td><div class="matrix-impact-bar"><div class="matrix-impact-fill very-high"></div></div></td>
                            <td><div class="matrix-impact-bar"><div class="matrix-impact-fill high"></div></div></td>
                            <td><div class="matrix-impact-bar"><div class="matrix-impact-fill low"></div></div></td>
                            <td><div class="matrix-impact-bar"><div class="matrix-impact-fill low"></div></div></td>
                        </tr>
                        <tr>
                            <td>Lateral Stiffness</td>
                            <td><div class="matrix-impact-bar"><div class="matrix-impact-fill low"></div></div></td>
                            <td><div class="matrix-impact-bar"><div class="matrix-impact-fill high"></div></div></td>
                            <td><div class="matrix-impact-bar"><div class="matrix-impact-fill low"></div></div></td>
                            <td><div class="matrix-impact-bar"><div class="matrix-impact-fill low"></div></div></td>
                        </tr>
                        <tr>
                            <td>Torsional Stiffness</td>
                            <td><div class="matrix-impact-bar"><div class="matrix-impact-fill low"></div></div></td>
                            <td><div class="matrix-impact-bar"><div class="matrix-impact-fill medium"></div></div></td>
                            <td><div class="matrix-impact-bar"><div class="matrix-impact-fill low"></div></div></td>
                            <td><div class="matrix-impact-bar"><div class="matrix-impact-fill medium"></div></div></td>
                        </tr>
                        <tr>
                            <td>Rim Flexural Mode</td>
                            <td><div class="matrix-impact-bar"><div class="matrix-impact-fill high"></div></div></td>
                            <td><div class="matrix-impact-bar"><div class="matrix-impact-fill low"></div></div></td>
                            <td><div class="matrix-impact-bar"><div class="matrix-impact-fill high"></div></div></td>
                            <td><div class="matrix-impact-bar"><div class="matrix-impact-fill low"></div></div></td>
                        </tr>
                        <tr>
                            <td>Brake Disk Mode</td>
                            <td><div class="matrix-impact-bar"><div class="matrix-impact-fill high"></div></div></td>
                            <td><div class="matrix-impact-bar"><div class="matrix-impact-fill low"></div></div></td>
                            <td><div class="matrix-impact-bar"><div class="matrix-impact-fill high"></div></div></td>
                            <td><div class="matrix-impact-bar"><div class="matrix-impact-fill very-high"></div></div></td>
                        </tr>
                        <tr>
                            <td>Spoke Resonance</td>
                            <td><div class="matrix-impact-bar"><div class="matrix-impact-fill medium"></div></div></td>
                            <td><div class="matrix-impact-bar"><div class="matrix-impact-fill low"></div></div></td>
                            <td><div class="matrix-impact-bar"><div class="matrix-impact-fill high"></div></div></td>
                            <td><div class="matrix-impact-bar"><div class="matrix-impact-fill low"></div></div></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <p class="text-center text-gray-600 mt-12 text-sm">
            
        </p>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const tabButtons = document.querySelectorAll('.tab-button');
            const tabContents = document.querySelectorAll('.tab-content');
            const horizontalBars = document.querySelectorAll('.horizontal-chart-container .horizontal-bar');

            // Max frequency for the X-axis scale
            const maxChartFreq = 800; // Hz

            // Function to map frequency to a percentage position on the X-axis
            function freqToXPercent(freq) {
                return (freq / maxChartFreq) * 100;
            }

            function updateHorizontalBars() {
                horizontalBars.forEach(bar => {
                    const startFreq = parseFloat(bar.dataset.startFreq);
                    const endFreq = parseFloat(bar.dataset.endFreq);

                    const startX = freqToXPercent(startFreq);
                    const endX = freqToXPercent(endFreq);
                    const barWidth = endX - startX;

                    bar.style.left = `${startX}%`;
                    bar.style.width = `${barWidth}%`;

                    // Update overlay text
                    const overlay = bar.querySelector('.freq-range-overlay');
                    if (overlay) {
                        overlay.textContent = `${startFreq}-${endFreq} Hz`;
                    }
                });
            }

            function resetHorizontalBars() {
                horizontalBars.forEach(bar => {
                    bar.style.width = '0';
                    bar.style.left = '0';
                    const overlay = bar.querySelector('.freq-range-overlay');
                    if (overlay) {
                        overlay.textContent = '';
                    }
                });
            }

            function showTab(tabId) {
                tabContents.forEach(content => {
                    content.classList.remove('active');
                });
                tabButtons.forEach(button => {
                    button.classList.remove('active');
                });

                document.getElementById(tabId).classList.add('active');
                document.querySelector(`.tab-button[data-tab="${tabId}"]`).classList.add('active');

                if (tabId === 'comparison') {
                    resetHorizontalBars(); // Reset before animating
                    setTimeout(updateHorizontalBars, 100); // Small delay to ensure reset takes effect
                } else {
                    resetHorizontalBars(); // Reset if switching away from comparison
                }
            }

            tabButtons.forEach(button => {
                button.addEventListener('click', () => {
                    showTab(button.dataset.tab);
                });
            });

            showTab('tyre-modes-data'); // Default tab
        });
    </script>
</body>
</html>
